import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.YPSzFf6x.js";const g=JSON.parse('{"title":"æ¡Œé¢ç«¯å¼€å‘æ¦‚è¿°","description":"","frontmatter":{},"headers":[],"relativePath":"desktop/index.md","filePath":"desktop/index.md","lastUpdated":1749039303000}'),h={name:"desktop/index.md"};function p(t,s,e,k,r,d){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="æ¡Œé¢ç«¯å¼€å‘æ¦‚è¿°" tabindex="-1">æ¡Œé¢ç«¯å¼€å‘æ¦‚è¿° <a class="header-anchor" href="#æ¡Œé¢ç«¯å¼€å‘æ¦‚è¿°" aria-label="Permalink to &quot;æ¡Œé¢ç«¯å¼€å‘æ¦‚è¿°&quot;">â€‹</a></h1><p>æµ·ç‹¸IMæ¡Œé¢å®¢æˆ·ç«¯åŸºäºElectron + Vue 3æŠ€æœ¯æ ˆå¼€å‘ï¼Œæä¾›è·¨å¹³å°çš„æ¡Œé¢å³æ—¶é€šè®¯ä½“éªŒï¼Œæ”¯æŒWindowsã€macOSå’ŒLinuxç³»ç»Ÿã€‚</p><h2 id="æŠ€æœ¯æ¶æ„" tabindex="-1">æŠ€æœ¯æ¶æ„ <a class="header-anchor" href="#æŠ€æœ¯æ¶æ„" aria-label="Permalink to &quot;æŠ€æœ¯æ¶æ„&quot;">â€‹</a></h2><h3 id="æ ¸å¿ƒæŠ€æœ¯æ ˆ" tabindex="-1">æ ¸å¿ƒæŠ€æœ¯æ ˆ <a class="header-anchor" href="#æ ¸å¿ƒæŠ€æœ¯æ ˆ" aria-label="Permalink to &quot;æ ¸å¿ƒæŠ€æœ¯æ ˆ&quot;">â€‹</a></h3><ul><li><strong>æ¡†æ¶</strong>: Electron 31.2+</li><li><strong>å‰ç«¯</strong>: Vue 3.4+ + TypeScript</li><li><strong>æ„å»ºå·¥å…·</strong>: Vite 5.3+</li><li><strong>UIæ¡†æ¶</strong>: Element Plus 2.9+</li><li><strong>çŠ¶æ€ç®¡ç†</strong>: Pinia 2.1+</li><li><strong>è·¯ç”±</strong>: Vue Router 4.2+</li><li><strong>é€šä¿¡åè®®</strong>: WebSocket + HTTP API</li><li><strong>æ‰“åŒ…å·¥å…·</strong>: electron-builder</li></ul><h3 id="æ¶æ„ç‰¹ç‚¹" tabindex="-1">æ¶æ„ç‰¹ç‚¹ <a class="header-anchor" href="#æ¶æ„ç‰¹ç‚¹" aria-label="Permalink to &quot;æ¶æ„ç‰¹ç‚¹&quot;">â€‹</a></h3><ul><li><strong>è·¨å¹³å°</strong>: ä¸€å¥—ä»£ç è¿è¡Œåœ¨Windowsã€macOSã€Linux</li><li><strong>åŸç”Ÿä½“éªŒ</strong>: ç³»ç»Ÿæ‰˜ç›˜ã€é€šçŸ¥ã€å¿«æ·é”®ç­‰åŸç”ŸåŠŸèƒ½</li><li><strong>é«˜æ€§èƒ½</strong>: åŸºäºChromiumå†…æ ¸ï¼Œæµç•…çš„ç”¨æˆ·ä½“éªŒ</li><li><strong>å®‰å…¨æ€§</strong>: è¿›ç¨‹éš”ç¦»ï¼Œå®‰å…¨çš„æ•°æ®ä¼ è¾“</li><li><strong>å¯æ‰©å±•</strong>: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºåŠŸèƒ½æ‰©å±•</li></ul><h2 id="åº”ç”¨ç‰¹æ€§" tabindex="-1">åº”ç”¨ç‰¹æ€§ <a class="header-anchor" href="#åº”ç”¨ç‰¹æ€§" aria-label="Permalink to &quot;åº”ç”¨ç‰¹æ€§&quot;">â€‹</a></h2><h3 id="ğŸ–¥ï¸-æ¡Œé¢ä½“éªŒ" tabindex="-1">ğŸ–¥ï¸ æ¡Œé¢ä½“éªŒ <a class="header-anchor" href="#ğŸ–¥ï¸-æ¡Œé¢ä½“éªŒ" aria-label="Permalink to &quot;ğŸ–¥ï¸ æ¡Œé¢ä½“éªŒ&quot;">â€‹</a></h3><ul><li><strong>ç³»ç»Ÿæ‰˜ç›˜</strong>: æœ€å°åŒ–åˆ°ç³»ç»Ÿæ‰˜ç›˜ï¼Œå¿«é€Ÿè®¿é—®</li><li><strong>æ¡Œé¢é€šçŸ¥</strong>: æ–°æ¶ˆæ¯ç³»ç»Ÿé€šçŸ¥æé†’</li><li><strong>å…¨å±€å¿«æ·é”®</strong>: å¿«é€Ÿå”¤é†’åº”ç”¨çª—å£</li><li><strong>å¼€æœºå¯åŠ¨</strong>: æ”¯æŒå¼€æœºè‡ªåŠ¨å¯åŠ¨</li><li><strong>çª—å£ç®¡ç†</strong>: å¤šçª—å£æ”¯æŒï¼Œè®°å¿†çª—å£çŠ¶æ€</li></ul><h3 id="ğŸ’¬-èŠå¤©åŠŸèƒ½" tabindex="-1">ğŸ’¬ èŠå¤©åŠŸèƒ½ <a class="header-anchor" href="#ğŸ’¬-èŠå¤©åŠŸèƒ½" aria-label="Permalink to &quot;ğŸ’¬ èŠå¤©åŠŸèƒ½&quot;">â€‹</a></h3><ul><li><strong>å®æ—¶æ¶ˆæ¯</strong>: WebSocketå®æ—¶æ¶ˆæ¯æ”¶å‘</li><li><strong>å¤šåª’ä½“</strong>: æ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€æ–‡ä»¶ä¼ è¾“</li><li><strong>è¡¨æƒ…ç¬¦å·</strong>: ä¸°å¯Œçš„è¡¨æƒ…åŒ…æ”¯æŒ</li><li><strong>æ¶ˆæ¯çŠ¶æ€</strong>: å·²é€è¾¾ã€å·²è¯»çŠ¶æ€æ˜¾ç¤º</li><li><strong>å†å²è®°å½•</strong>: æœ¬åœ°æ¶ˆæ¯å­˜å‚¨å’Œæœç´¢</li></ul><h3 id="ğŸ‘¥-è”ç³»äººç®¡ç†" tabindex="-1">ğŸ‘¥ è”ç³»äººç®¡ç† <a class="header-anchor" href="#ğŸ‘¥-è”ç³»äººç®¡ç†" aria-label="Permalink to &quot;ğŸ‘¥ è”ç³»äººç®¡ç†&quot;">â€‹</a></h3><ul><li><strong>å¥½å‹åˆ—è¡¨</strong>: åœ¨çº¿çŠ¶æ€æ˜¾ç¤º</li><li><strong>ç¾¤ç»„èŠå¤©</strong>: ç¾¤ç»„åˆ›å»ºå’Œç®¡ç†</li><li><strong>ç”¨æˆ·ä¿¡æ¯</strong>: ä¸ªäººèµ„æ–™æŸ¥çœ‹å’Œç¼–è¾‘</li><li><strong>æœç´¢åŠŸèƒ½</strong>: è”ç³»äººå’Œæ¶ˆæ¯æœç´¢</li></ul><h3 id="ğŸ¨-ç•Œé¢è®¾è®¡" tabindex="-1">ğŸ¨ ç•Œé¢è®¾è®¡ <a class="header-anchor" href="#ğŸ¨-ç•Œé¢è®¾è®¡" aria-label="Permalink to &quot;ğŸ¨ ç•Œé¢è®¾è®¡&quot;">â€‹</a></h3><ul><li><strong>ç°ä»£UI</strong>: ç®€æ´ç¾è§‚çš„ç•Œé¢è®¾è®¡</li><li><strong>ä¸»é¢˜åˆ‡æ¢</strong>: æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢</li><li><strong>å“åº”å¼</strong>: é€‚é…ä¸åŒå±å¹•å°ºå¯¸</li><li><strong>ä¸ªæ€§åŒ–</strong>: å¯è‡ªå®šä¹‰ç•Œé¢è®¾ç½®</li></ul><h2 id="é¡¹ç›®ç»“æ„" tabindex="-1">é¡¹ç›®ç»“æ„ <a class="header-anchor" href="#é¡¹ç›®ç»“æ„" aria-label="Permalink to &quot;é¡¹ç›®ç»“æ„&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>beaver-desktop/</span></span>
<span class="line"><span>â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ main/                  # ä¸»è¿›ç¨‹</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ index.ts          # ä¸»è¿›ç¨‹å…¥å£</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ window.ts         # çª—å£ç®¡ç†</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ menu.ts           # èœå•é…ç½®</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ tray.ts           # ç³»ç»Ÿæ‰˜ç›˜</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ updater.ts        # è‡ªåŠ¨æ›´æ–°</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ render/               # æ¸²æŸ“è¿›ç¨‹</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ app/              # åº”ç”¨ä¸»ä½“</span></span>
<span class="line"><span>â”‚   â”‚   â”‚   â”œâ”€â”€ components/   # é€šç”¨ç»„ä»¶</span></span>
<span class="line"><span>â”‚   â”‚   â”‚   â”œâ”€â”€ page/         # é¡µé¢ç»„ä»¶</span></span>
<span class="line"><span>â”‚   â”‚   â”‚   â”œâ”€â”€ pinia/        # çŠ¶æ€ç®¡ç†</span></span>
<span class="line"><span>â”‚   â”‚   â”‚   â”œâ”€â”€ router/       # è·¯ç”±é…ç½®</span></span>
<span class="line"><span>â”‚   â”‚   â”‚   â”œâ”€â”€ utils/        # å·¥å…·å‡½æ•°</span></span>
<span class="line"><span>â”‚   â”‚   â”‚   â””â”€â”€ ws-manager/   # WebSocketç®¡ç†</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ login/            # ç™»å½•é¡µé¢</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ preload.ts        # é¢„åŠ è½½è„šæœ¬</span></span>
<span class="line"><span>â”‚   â””â”€â”€ shared/               # å…±äº«æ¨¡å—</span></span>
<span class="line"><span>â”‚       â”œâ”€â”€ types/            # ç±»å‹å®šä¹‰</span></span>
<span class="line"><span>â”‚       â””â”€â”€ constants/        # å¸¸é‡å®šä¹‰</span></span>
<span class="line"><span>â”œâ”€â”€ public/                   # é™æ€èµ„æº</span></span>
<span class="line"><span>â”œâ”€â”€ build/                    # æ„å»ºé…ç½®</span></span>
<span class="line"><span>â”œâ”€â”€ resource/                 # åº”ç”¨èµ„æº</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ app.ico              # åº”ç”¨å›¾æ ‡</span></span>
<span class="line"><span>â”‚   â””â”€â”€ installer/           # å®‰è£…ç¨‹åºèµ„æº</span></span>
<span class="line"><span>â”œâ”€â”€ package.json             # é¡¹ç›®é…ç½®</span></span>
<span class="line"><span>â”œâ”€â”€ vite.config.ts           # Viteé…ç½®</span></span>
<span class="line"><span>â””â”€â”€ electron-builder.json    # æ‰“åŒ…é…ç½®</span></span></code></pre></div><h2 id="æ ¸å¿ƒæ¨¡å—" tabindex="-1">æ ¸å¿ƒæ¨¡å— <a class="header-anchor" href="#æ ¸å¿ƒæ¨¡å—" aria-label="Permalink to &quot;æ ¸å¿ƒæ¨¡å—&quot;">â€‹</a></h2><h3 id="_1-ä¸»è¿›ç¨‹-main-process" tabindex="-1">1. ä¸»è¿›ç¨‹ (Main Process) <a class="header-anchor" href="#_1-ä¸»è¿›ç¨‹-main-process" aria-label="Permalink to &quot;1. ä¸»è¿›ç¨‹ (Main Process)&quot;">â€‹</a></h3><p>ä¸»è¿›ç¨‹è´Ÿè´£åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œç³»ç»Ÿçº§åŠŸèƒ½ï¼š</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/main/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { app, BrowserWindow } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;electron&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createWindow } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./window&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createTray } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./tray&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { setupMenu } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./menu&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> mainWindow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BrowserWindow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">whenReady</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.mainWindow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    createTray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.mainWindow)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setupMenu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="_2-æ¸²æŸ“è¿›ç¨‹-renderer-process" tabindex="-1">2. æ¸²æŸ“è¿›ç¨‹ (Renderer Process) <a class="header-anchor" href="#_2-æ¸²æŸ“è¿›ç¨‹-renderer-process" aria-label="Permalink to &quot;2. æ¸²æŸ“è¿›ç¨‹ (Renderer Process)&quot;">â€‹</a></h3><p>æ¸²æŸ“è¿›ç¨‹è´Ÿè´£UIç•Œé¢å’Œç”¨æˆ·äº¤äº’ï¼š</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/render/app/main.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createApp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createPinia } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;pinia&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { router } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./router&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> App </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./App.vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ElementPlus </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-plus&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(App)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createPinia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(router)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ElementPlus)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="_3-websocketç®¡ç†å™¨" tabindex="-1">3. WebSocketç®¡ç†å™¨ <a class="header-anchor" href="#_3-websocketç®¡ç†å™¨" aria-label="Permalink to &quot;3. WebSocketç®¡ç†å™¨&quot;">â€‹</a></h3><p>è´Ÿè´£ä¸æœåŠ¡ç«¯çš„å®æ—¶é€šä¿¡ï¼š</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/render/app/ws-manager/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WsManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> heartbeatTimer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setupEventHandlers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startHeartbeat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  sendMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws?.readyState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WebSocket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OPEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setupEventHandlers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onopen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handleOpen</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onmessage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handleMessage</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onclose </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handleClose</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onerror </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handleError</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_4-çŠ¶æ€ç®¡ç†" tabindex="-1">4. çŠ¶æ€ç®¡ç† <a class="header-anchor" href="#_4-çŠ¶æ€ç®¡ç†" aria-label="Permalink to &quot;4. çŠ¶æ€ç®¡ç†&quot;">â€‹</a></h3><p>ä½¿ç”¨Piniaè¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼š</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/render/app/pinia/user/user.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> useUserStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    userInfo: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    isLogin: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  actions: {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">credentials</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LoginData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(credentials)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.userInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.data</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.isLogin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    logout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.userInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.isLogin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="è¿›ç¨‹é€šä¿¡" tabindex="-1">è¿›ç¨‹é€šä¿¡ <a class="header-anchor" href="#è¿›ç¨‹é€šä¿¡" aria-label="Permalink to &quot;è¿›ç¨‹é€šä¿¡&quot;">â€‹</a></h2><h3 id="ipcé€šä¿¡æœºåˆ¶" tabindex="-1">IPCé€šä¿¡æœºåˆ¶ <a class="header-anchor" href="#ipcé€šä¿¡æœºåˆ¶" aria-label="Permalink to &quot;IPCé€šä¿¡æœºåˆ¶&quot;">â€‹</a></h3><p>ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹é€šè¿‡IPCè¿›è¡Œé€šä¿¡ï¼š</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸»è¿›ç¨‹ç›‘å¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ipcMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;get-app-version&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¸²æŸ“è¿›ç¨‹è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;get-app-version&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="é¢„åŠ è½½è„šæœ¬" tabindex="-1">é¢„åŠ è½½è„šæœ¬ <a class="header-anchor" href="#é¢„åŠ è½½è„šæœ¬" aria-label="Permalink to &quot;é¢„åŠ è½½è„šæœ¬&quot;">â€‹</a></h3><p>é€šè¿‡é¢„åŠ è½½è„šæœ¬å®‰å…¨åœ°æš´éœ²APIï¼š</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/render/preload.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { contextBridge, ipcRenderer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;electron&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextBridge.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exposeInMainWorld</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;electronAPI&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  getVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;get-app-version&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  minimize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;window-minimize&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;window-close&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="åŠŸèƒ½æ¨¡å—" tabindex="-1">åŠŸèƒ½æ¨¡å— <a class="header-anchor" href="#åŠŸèƒ½æ¨¡å—" aria-label="Permalink to &quot;åŠŸèƒ½æ¨¡å—&quot;">â€‹</a></h2><h3 id="_1-ç”¨æˆ·è®¤è¯" tabindex="-1">1. ç”¨æˆ·è®¤è¯ <a class="header-anchor" href="#_1-ç”¨æˆ·è®¤è¯" aria-label="Permalink to &quot;1. ç”¨æˆ·è®¤è¯&quot;">â€‹</a></h3><ul><li>ç”¨æˆ·ç™»å½•/æ³¨å†Œ</li><li>Tokenç®¡ç†</li><li>è‡ªåŠ¨ç™»å½•</li><li>è´¦å·åˆ‡æ¢</li></ul><h3 id="_2-æ¶ˆæ¯æ”¶å‘" tabindex="-1">2. æ¶ˆæ¯æ”¶å‘ <a class="header-anchor" href="#_2-æ¶ˆæ¯æ”¶å‘" aria-label="Permalink to &quot;2. æ¶ˆæ¯æ”¶å‘&quot;">â€‹</a></h3><ul><li>æ–‡æœ¬æ¶ˆæ¯</li><li>å›¾ç‰‡æ¶ˆæ¯</li><li>æ–‡ä»¶ä¼ è¾“</li><li>è¡¨æƒ…ç¬¦å·</li></ul><h3 id="_3-è”ç³»äººç®¡ç†" tabindex="-1">3. è”ç³»äººç®¡ç† <a class="header-anchor" href="#_3-è”ç³»äººç®¡ç†" aria-label="Permalink to &quot;3. è”ç³»äººç®¡ç†&quot;">â€‹</a></h3><ul><li>å¥½å‹åˆ—è¡¨</li><li>ç¾¤ç»„ç®¡ç†</li><li>ç”¨æˆ·æœç´¢</li><li>åœ¨çº¿çŠ¶æ€</li></ul><h3 id="_4-ç³»ç»Ÿé›†æˆ" tabindex="-1">4. ç³»ç»Ÿé›†æˆ <a class="header-anchor" href="#_4-ç³»ç»Ÿé›†æˆ" aria-label="Permalink to &quot;4. ç³»ç»Ÿé›†æˆ&quot;">â€‹</a></h3><ul><li>ç³»ç»Ÿæ‰˜ç›˜</li><li>æ¡Œé¢é€šçŸ¥</li><li>å…¨å±€å¿«æ·é”®</li><li>å¼€æœºå¯åŠ¨</li></ul><h2 id="å¼€å‘ç¯å¢ƒæ­å»º" tabindex="-1">å¼€å‘ç¯å¢ƒæ­å»º <a class="header-anchor" href="#å¼€å‘ç¯å¢ƒæ­å»º" aria-label="Permalink to &quot;å¼€å‘ç¯å¢ƒæ­å»º&quot;">â€‹</a></h2><h3 id="_1-ç¯å¢ƒè¦æ±‚" tabindex="-1">1. ç¯å¢ƒè¦æ±‚ <a class="header-anchor" href="#_1-ç¯å¢ƒè¦æ±‚" aria-label="Permalink to &quot;1. ç¯å¢ƒè¦æ±‚&quot;">â€‹</a></h3><ul><li>Node.js 18+</li><li>npm æˆ– yarn</li><li>Git</li></ul><h3 id="_2-å…‹éš†é¡¹ç›®" tabindex="-1">2. å…‹éš†é¡¹ç›® <a class="header-anchor" href="#_2-å…‹éš†é¡¹ç›®" aria-label="Permalink to &quot;2. å…‹éš†é¡¹ç›®&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/your-repo/beaver-im.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> beaver-im/beaver-desktop</span></span></code></pre></div><h3 id="_3-å®‰è£…ä¾èµ–" tabindex="-1">3. å®‰è£…ä¾èµ– <a class="header-anchor" href="#_3-å®‰è£…ä¾èµ–" aria-label="Permalink to &quot;3. å®‰è£…ä¾èµ–&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><h3 id="_4-å¯åŠ¨å¼€å‘ç¯å¢ƒ" tabindex="-1">4. å¯åŠ¨å¼€å‘ç¯å¢ƒ <a class="header-anchor" href="#_4-å¯åŠ¨å¼€å‘ç¯å¢ƒ" aria-label="Permalink to &quot;4. å¯åŠ¨å¼€å‘ç¯å¢ƒ&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><h3 id="_5-æ„å»ºç”Ÿäº§ç‰ˆæœ¬" tabindex="-1">5. æ„å»ºç”Ÿäº§ç‰ˆæœ¬ <a class="header-anchor" href="#_5-æ„å»ºç”Ÿäº§ç‰ˆæœ¬" aria-label="Permalink to &quot;5. æ„å»ºç”Ÿäº§ç‰ˆæœ¬&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ„å»ºæ¸²æŸ“è¿›ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build-renderer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ„å»ºElectronåº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build-electron</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®Œæ•´æ„å»ºæµç¨‹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package</span></span></code></pre></div><h2 id="æ‰“åŒ…åˆ†å‘" tabindex="-1">æ‰“åŒ…åˆ†å‘ <a class="header-anchor" href="#æ‰“åŒ…åˆ†å‘" aria-label="Permalink to &quot;æ‰“åŒ…åˆ†å‘&quot;">â€‹</a></h2><h3 id="windowså¹³å°" tabindex="-1">Windowså¹³å° <a class="header-anchor" href="#windowså¹³å°" aria-label="Permalink to &quot;Windowså¹³å°&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”ŸæˆWindowså®‰è£…åŒ…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package-install</span></span></code></pre></div><p>ç”Ÿæˆæ–‡ä»¶ï¼š</p><ul><li><code>release/æµ·ç‹¸-{version}.exe</code> - NSISå®‰è£…ç¨‹åº</li></ul><h3 id="macoså¹³å°" tabindex="-1">macOSå¹³å° <a class="header-anchor" href="#macoså¹³å°" aria-label="Permalink to &quot;macOSå¹³å°&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”ŸæˆmacOSåº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">electron-builder</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mac</span></span></code></pre></div><p>ç”Ÿæˆæ–‡ä»¶ï¼š</p><ul><li><code>release/æµ·ç‹¸-{version}.dmg</code> - DMGå®‰è£…åŒ…</li><li><code>release/æµ·ç‹¸-{version}.app</code> - åº”ç”¨ç¨‹åº</li></ul><h3 id="linuxå¹³å°" tabindex="-1">Linuxå¹³å° <a class="header-anchor" href="#linuxå¹³å°" aria-label="Permalink to &quot;Linuxå¹³å°&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”ŸæˆLinuxåº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">electron-builder</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --linux</span></span></code></pre></div><p>ç”Ÿæˆæ–‡ä»¶ï¼š</p><ul><li><code>release/æµ·ç‹¸-{version}.AppImage</code> - AppImageæ ¼å¼</li><li><code>release/æµ·ç‹¸-{version}.deb</code> - DebianåŒ…</li><li><code>release/æµ·ç‹¸-{version}.rpm</code> - RPMåŒ…</li></ul><h2 id="è‡ªåŠ¨æ›´æ–°" tabindex="-1">è‡ªåŠ¨æ›´æ–° <a class="header-anchor" href="#è‡ªåŠ¨æ›´æ–°" aria-label="Permalink to &quot;è‡ªåŠ¨æ›´æ–°&quot;">â€‹</a></h2><p>æ”¯æŒåº”ç”¨è‡ªåŠ¨æ›´æ–°æœºåˆ¶ï¼š</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/main/updater.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { autoUpdater } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;electron-updater&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setupAutoUpdater</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkForUpdatesAndNotify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update-available&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å‘ç°æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  autoUpdater.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update-downloaded&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ›´æ–°å·²ä¸‹è½½ï¼Œæç¤ºé‡å¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="æ€§èƒ½ä¼˜åŒ–" tabindex="-1">æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h2><h3 id="_1-å¯åŠ¨ä¼˜åŒ–" tabindex="-1">1. å¯åŠ¨ä¼˜åŒ– <a class="header-anchor" href="#_1-å¯åŠ¨ä¼˜åŒ–" aria-label="Permalink to &quot;1. å¯åŠ¨ä¼˜åŒ–&quot;">â€‹</a></h3><ul><li>é¢„åŠ è½½å…³é”®æ¨¡å—</li><li>å»¶è¿ŸåŠ è½½éå…³é”®åŠŸèƒ½</li><li>çª—å£æ˜¾ç¤ºä¼˜åŒ–</li></ul><h3 id="_2-å†…å­˜ä¼˜åŒ–" tabindex="-1">2. å†…å­˜ä¼˜åŒ– <a class="header-anchor" href="#_2-å†…å­˜ä¼˜åŒ–" aria-label="Permalink to &quot;2. å†…å­˜ä¼˜åŒ–&quot;">â€‹</a></h3><ul><li>å›¾ç‰‡æ‡’åŠ è½½</li><li>è™šæ‹Ÿæ»šåŠ¨</li><li>å†…å­˜æ³„æ¼ç›‘æ§</li></ul><h3 id="_3-æ¸²æŸ“ä¼˜åŒ–" tabindex="-1">3. æ¸²æŸ“ä¼˜åŒ– <a class="header-anchor" href="#_3-æ¸²æŸ“ä¼˜åŒ–" aria-label="Permalink to &quot;3. æ¸²æŸ“ä¼˜åŒ–&quot;">â€‹</a></h3><ul><li>Vueç»„ä»¶æ‡’åŠ è½½</li><li>CSSä¼˜åŒ–</li><li>åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–</li></ul><h2 id="è°ƒè¯•æŒ‡å—" tabindex="-1">è°ƒè¯•æŒ‡å— <a class="header-anchor" href="#è°ƒè¯•æŒ‡å—" aria-label="Permalink to &quot;è°ƒè¯•æŒ‡å—&quot;">â€‹</a></h2><h3 id="å¼€å‘è€…å·¥å…·" tabindex="-1">å¼€å‘è€…å·¥å…· <a class="header-anchor" href="#å¼€å‘è€…å·¥å…·" aria-label="Permalink to &quot;å¼€å‘è€…å·¥å…·&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯åŠ¨æ—¶æ‰“å¼€å¼€å‘è€…å·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --debug</span></span></code></pre></div><h3 id="æ—¥å¿—ç³»ç»Ÿ" tabindex="-1">æ—¥å¿—ç³»ç»Ÿ <a class="header-anchor" href="#æ—¥å¿—ç³»ç»Ÿ" aria-label="Permalink to &quot;æ—¥å¿—ç³»ç»Ÿ&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;electron-log&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åº”ç”¨å¯åŠ¨&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å‘ç”Ÿé”™è¯¯&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error)</span></span></code></pre></div><p>æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š</p><ul><li>Windows: <code>%USERPROFILE%\\AppData\\Roaming\\æµ·ç‹¸\\logs\\</code></li><li>macOS: <code>~/Library/Logs/æµ·ç‹¸/</code></li><li>Linux: <code>~/.config/æµ·ç‹¸/logs/</code></li></ul><h2 id="ä¸‹ä¸€æ­¥" tabindex="-1">ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;ä¸‹ä¸€æ­¥&quot;">â€‹</a></h2><ul><li><a href="./tech-stack.html">æŠ€æœ¯æ ˆè¯¦è§£</a> - æ·±å…¥äº†è§£æŠ€æœ¯é€‰å‹</li><li><a href="./structure.html">é¡¹ç›®ç»“æ„</a> - è¯¦ç»†çš„é¡¹ç›®ç»“æ„è¯´æ˜</li><li><a href="./websocket.html">WebSocketè¿æ¥</a> - WebSocketé€šä¿¡æœºåˆ¶</li><li><a href="./development.html">å¼€å‘æŒ‡å—</a> - æœ¬åœ°å¼€å‘ç¯å¢ƒæ­å»º</li></ul>`,90)]))}const o=i(h,[["render",p]]);export{g as __pageData,o as default};
