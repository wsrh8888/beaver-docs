import{_ as i,c as a,o as t,ag as n}from"./chunks/framework.YPSzFf6x.js";const E=JSON.parse('{"title":"后端开发概述","description":"","frontmatter":{},"headers":[],"relativePath":"backend/index.md","filePath":"backend/index.md","lastUpdated":1749039303000}'),l={name:"backend/index.md"};function e(h,s,p,d,k,r){return t(),a("div",null,s[0]||(s[0]=[n(`<h1 id="后端开发概述" tabindex="-1">后端开发概述 <a class="header-anchor" href="#后端开发概述" aria-label="Permalink to &quot;后端开发概述&quot;">​</a></h1><p>海狸IM后端基于Go语言和go-zero微服务框架构建，采用微服务架构设计，具有高性能、高可用、易扩展的特点。</p><h2 id="技术架构" tabindex="-1">技术架构 <a class="header-anchor" href="#技术架构" aria-label="Permalink to &quot;技术架构&quot;">​</a></h2><h3 id="核心技术栈" tabindex="-1">核心技术栈 <a class="header-anchor" href="#核心技术栈" aria-label="Permalink to &quot;核心技术栈&quot;">​</a></h3><ul><li><strong>编程语言</strong>: Go 1.23+</li><li><strong>微服务框架</strong>: go-zero</li><li><strong>数据库</strong>: MySQL 8.0+</li><li><strong>缓存</strong>: Redis 6.0+</li><li><strong>消息存储</strong>: 自研消息数据库</li><li><strong>WebSocket</strong>: gorilla/websocket</li><li><strong>认证</strong>: JWT</li><li><strong>容器化</strong>: Docker</li><li><strong>API文档</strong>: 自动生成的OpenAPI文档</li></ul><h3 id="架构特点" tabindex="-1">架构特点 <a class="header-anchor" href="#架构特点" aria-label="Permalink to &quot;架构特点&quot;">​</a></h3><ul><li><strong>微服务架构</strong>: 按业务领域拆分为多个独立服务</li><li><strong>高性能</strong>: 基于Go语言的高并发特性</li><li><strong>水平扩展</strong>: 支持服务实例的水平扩展</li><li><strong>服务发现</strong>: 基于etcd的服务注册与发现</li><li><strong>负载均衡</strong>: 内置负载均衡机制</li><li><strong>熔断降级</strong>: 内置熔断器保护系统稳定性</li></ul><h2 id="服务列表" tabindex="-1">服务列表 <a class="header-anchor" href="#服务列表" aria-label="Permalink to &quot;服务列表&quot;">​</a></h2><p>海狸IM后端包含以下微服务：</p><table tabindex="0"><thead><tr><th>服务名称</th><th>API端口</th><th>RPC端口</th><th>Admin端口</th><th>职责</th></tr></thead><tbody><tr><td>user</td><td>21000</td><td>22000</td><td>23000</td><td>用户管理</td></tr><tr><td>auth</td><td>21010</td><td>22010</td><td>23010</td><td>认证授权</td></tr><tr><td>friend</td><td>21020</td><td>22020</td><td>23020</td><td>好友管理</td></tr><tr><td>chat</td><td>21030</td><td>22030</td><td>23030</td><td>聊天消息</td></tr><tr><td>ws</td><td>21040</td><td>22040</td><td>23040</td><td>WebSocket连接</td></tr><tr><td>group</td><td>21050</td><td>22050</td><td>23050</td><td>群组管理</td></tr><tr><td>file</td><td>21060</td><td>22060</td><td>23060</td><td>文件处理</td></tr><tr><td>emoji</td><td>21070</td><td>22070</td><td>23070</td><td>表情管理</td></tr><tr><td>gateway</td><td>21080</td><td>-</td><td>23080</td><td>API网关</td></tr><tr><td>moment</td><td>21090</td><td>-</td><td>23090</td><td>朋友圈</td></tr><tr><td>system</td><td>21100</td><td>-</td><td>23100</td><td>系统设置</td></tr><tr><td>call</td><td>21110</td><td>-</td><td>23110</td><td>音视频通话</td></tr><tr><td>settings</td><td>21120</td><td>-</td><td>23120</td><td>用户设置</td></tr><tr><td>notification</td><td>21140</td><td>-</td><td>23140</td><td>消息推送</td></tr><tr><td>feedback</td><td>21150</td><td>-</td><td>23150</td><td>意见反馈</td></tr><tr><td>track</td><td>21160</td><td>-</td><td>23160</td><td>行为统计</td></tr><tr><td>upload</td><td>21170</td><td>-</td><td>23170</td><td>文件上传</td></tr></tbody></table><h2 id="项目结构" tabindex="-1">项目结构 <a class="header-anchor" href="#项目结构" aria-label="Permalink to &quot;项目结构&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>beaver-server/</span></span>
<span class="line"><span>├── app/                    # 应用服务</span></span>
<span class="line"><span>│   ├── user/              # 用户服务</span></span>
<span class="line"><span>│   │   ├── api/           # HTTP API</span></span>
<span class="line"><span>│   │   ├── rpc/           # RPC服务</span></span>
<span class="line"><span>│   │   └── admin/         # 管理接口</span></span>
<span class="line"><span>│   ├── auth/              # 认证服务</span></span>
<span class="line"><span>│   ├── friend/            # 好友服务</span></span>
<span class="line"><span>│   ├── chat/              # 聊天服务</span></span>
<span class="line"><span>│   ├── ws/                # WebSocket服务</span></span>
<span class="line"><span>│   └── ...                # 其他服务</span></span>
<span class="line"><span>├── common/                # 公共模块</span></span>
<span class="line"><span>│   ├── auth/              # 认证相关</span></span>
<span class="line"><span>│   ├── config/            # 配置管理</span></span>
<span class="line"><span>│   ├── middleware/        # 中间件</span></span>
<span class="line"><span>│   ├── response/          # 响应封装</span></span>
<span class="line"><span>│   └── utils/             # 工具函数</span></span>
<span class="line"><span>├── core/                  # 核心模块</span></span>
<span class="line"><span>│   ├── database/          # 数据库连接</span></span>
<span class="line"><span>│   ├── redis/             # Redis连接</span></span>
<span class="line"><span>│   └── websocket/         # WebSocket核心</span></span>
<span class="line"><span>├── database/              # 数据库相关</span></span>
<span class="line"><span>│   ├── migrations/        # 数据库迁移</span></span>
<span class="line"><span>│   └── seeds/             # 初始数据</span></span>
<span class="line"><span>├── deploy/                # 部署文件</span></span>
<span class="line"><span>│   ├── docker/            # Docker配置</span></span>
<span class="line"><span>│   └── k8s/               # Kubernetes配置</span></span>
<span class="line"><span>├── docs/                  # 接口文档</span></span>
<span class="line"><span>├── main.go                # 主入口</span></span>
<span class="line"><span>├── go.mod                 # Go模块定义</span></span>
<span class="line"><span>└── Dockerfile             # Docker构建文件</span></span></code></pre></div><h2 id="核心模块" tabindex="-1">核心模块 <a class="header-anchor" href="#核心模块" aria-label="Permalink to &quot;核心模块&quot;">​</a></h2><h3 id="_1-用户服务-user-service" tabindex="-1">1. 用户服务 (User Service) <a class="header-anchor" href="#_1-用户服务-user-service" aria-label="Permalink to &quot;1. 用户服务 (User Service)&quot;">​</a></h3><p>负责用户相关的业务逻辑：</p><ul><li>用户注册、登录</li><li>用户信息管理</li><li>用户状态管理</li><li>用户权限控制</li></ul><p><strong>主要接口</strong>:</p><ul><li><code>POST /api/user/register</code> - 用户注册</li><li><code>POST /api/user/login</code> - 用户登录</li><li><code>GET /api/user/profile</code> - 获取用户信息</li><li><code>PUT /api/user/profile</code> - 更新用户信息</li></ul><h3 id="_2-认证服务-auth-service" tabindex="-1">2. 认证服务 (Auth Service) <a class="header-anchor" href="#_2-认证服务-auth-service" aria-label="Permalink to &quot;2. 认证服务 (Auth Service)&quot;">​</a></h3><p>处理系统的认证和授权：</p><ul><li>JWT Token生成和验证</li><li>刷新Token</li><li>权限验证</li><li>单点登录</li></ul><p><strong>主要接口</strong>:</p><ul><li><code>POST /api/auth/token</code> - 获取访问令牌</li><li><code>POST /api/auth/refresh</code> - 刷新令牌</li><li><code>POST /api/auth/verify</code> - 验证令牌</li></ul><h3 id="_3-聊天服务-chat-service" tabindex="-1">3. 聊天服务 (Chat Service) <a class="header-anchor" href="#_3-聊天服务-chat-service" aria-label="Permalink to &quot;3. 聊天服务 (Chat Service)&quot;">​</a></h3><p>处理消息相关的业务：</p><ul><li>消息发送和接收</li><li>消息存储和查询</li><li>消息状态管理</li><li>消息推送</li></ul><p><strong>主要接口</strong>:</p><ul><li><code>POST /api/chat/send</code> - 发送消息</li><li><code>GET /api/chat/messages</code> - 获取消息列表</li><li><code>PUT /api/chat/read</code> - 标记消息已读</li></ul><h3 id="_4-websocket服务-websocket-service" tabindex="-1">4. WebSocket服务 (WebSocket Service) <a class="header-anchor" href="#_4-websocket服务-websocket-service" aria-label="Permalink to &quot;4. WebSocket服务 (WebSocket Service)&quot;">​</a></h3><p>实时通信的核心服务：</p><ul><li>WebSocket连接管理</li><li>实时消息推送</li><li>在线状态管理</li><li>心跳检测</li></ul><p><strong>连接地址</strong>: <code>ws://localhost:21040/ws</code></p><h3 id="_5-好友服务-friend-service" tabindex="-1">5. 好友服务 (Friend Service) <a class="header-anchor" href="#_5-好友服务-friend-service" aria-label="Permalink to &quot;5. 好友服务 (Friend Service)&quot;">​</a></h3><p>好友关系管理：</p><ul><li>好友申请和确认</li><li>好友列表管理</li><li>好友状态查询</li><li>黑名单管理</li></ul><h3 id="_6-群组服务-group-service" tabindex="-1">6. 群组服务 (Group Service) <a class="header-anchor" href="#_6-群组服务-group-service" aria-label="Permalink to &quot;6. 群组服务 (Group Service)&quot;">​</a></h3><p>群组功能管理：</p><ul><li>群组创建和解散</li><li>成员管理</li><li>群组权限</li><li>群组设置</li></ul><h2 id="数据库设计" tabindex="-1">数据库设计 <a class="header-anchor" href="#数据库设计" aria-label="Permalink to &quot;数据库设计&quot;">​</a></h2><h3 id="用户表-users" tabindex="-1">用户表 (users) <a class="header-anchor" href="#用户表-users" aria-label="Permalink to &quot;用户表 (users)&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> users</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    email </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    phone </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    nickname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    avatar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TINYINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    updated_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_TIMESTAMP </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_TIMESTAMP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="消息表-messages" tabindex="-1">消息表 (messages) <a class="header-anchor" href="#消息表-messages" aria-label="Permalink to &quot;消息表 (messages)&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> messages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    conversation_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sender_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    message_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TINYINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    extra </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    INDEX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idx_conversation_id (conversation_id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    INDEX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idx_sender_id (sender_id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    INDEX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idx_created_at (created_at)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="会话表-conversations" tabindex="-1">会话表 (conversations) <a class="header-anchor" href="#会话表-conversations" aria-label="Permalink to &quot;会话表 (conversations)&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> conversations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TINYINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 1:单聊 2:群聊</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    creator_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    avatar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    member_count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    updated_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_TIMESTAMP </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_TIMESTAMP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="api设计规范" tabindex="-1">API设计规范 <a class="header-anchor" href="#api设计规范" aria-label="Permalink to &quot;API设计规范&quot;">​</a></h2><h3 id="restful-api" tabindex="-1">RESTful API <a class="header-anchor" href="#restful-api" aria-label="Permalink to &quot;RESTful API&quot;">​</a></h3><p>遵循RESTful设计原则：</p><ul><li><code>GET</code> - 获取资源</li><li><code>POST</code> - 创建资源</li><li><code>PUT</code> - 更新资源</li><li><code>DELETE</code> - 删除资源</li></ul><h3 id="统一响应格式" tabindex="-1">统一响应格式 <a class="header-anchor" href="#统一响应格式" aria-label="Permalink to &quot;统一响应格式&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1640995200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="错误码规范" tabindex="-1">错误码规范 <a class="header-anchor" href="#错误码规范" aria-label="Permalink to &quot;错误码规范&quot;">​</a></h3><table tabindex="0"><thead><tr><th>错误码</th><th>说明</th></tr></thead><tbody><tr><td>200</td><td>成功</td></tr><tr><td>400</td><td>请求参数错误</td></tr><tr><td>401</td><td>未授权</td></tr><tr><td>403</td><td>禁止访问</td></tr><tr><td>404</td><td>资源不存在</td></tr><tr><td>500</td><td>服务器内部错误</td></tr></tbody></table><h2 id="开发环境搭建" tabindex="-1">开发环境搭建 <a class="header-anchor" href="#开发环境搭建" aria-label="Permalink to &quot;开发环境搭建&quot;">​</a></h2><h3 id="_1-环境要求" tabindex="-1">1. 环境要求 <a class="header-anchor" href="#_1-环境要求" aria-label="Permalink to &quot;1. 环境要求&quot;">​</a></h3><ul><li>Go 1.23+</li><li>MySQL 8.0+</li><li>Redis 6.0+</li><li>Git</li></ul><h3 id="_2-克隆项目" tabindex="-1">2. 克隆项目 <a class="header-anchor" href="#_2-克隆项目" aria-label="Permalink to &quot;2. 克隆项目&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/your-repo/beaver-im.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> beaver-im/beaver-server</span></span></code></pre></div><h3 id="_3-安装依赖" tabindex="-1">3. 安装依赖 <a class="header-anchor" href="#_3-安装依赖" aria-label="Permalink to &quot;3. 安装依赖&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> download</span></span></code></pre></div><h3 id="_4-配置数据库" tabindex="-1">4. 配置数据库 <a class="header-anchor" href="#_4-配置数据库" aria-label="Permalink to &quot;4. 配置数据库&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建数据库</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CREATE DATABASE beaver_im CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 导入数据库结构</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> beaver_im</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> database/init.sql</span></span></code></pre></div><h3 id="_5-配置文件" tabindex="-1">5. 配置文件 <a class="header-anchor" href="#_5-配置文件" aria-label="Permalink to &quot;5. 配置文件&quot;">​</a></h3><p>复制并修改配置文件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config/config.example.yaml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config/config.yaml</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编辑配置文件，设置数据库连接信息等</span></span></code></pre></div><h3 id="_6-启动服务" tabindex="-1">6. 启动服务 <a class="header-anchor" href="#_6-启动服务" aria-label="Permalink to &quot;6. 启动服务&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动所有服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main.go</span></span></code></pre></div><h2 id="性能特点" tabindex="-1">性能特点 <a class="header-anchor" href="#性能特点" aria-label="Permalink to &quot;性能特点&quot;">​</a></h2><ul><li><strong>高并发</strong>: 单机支持10万+并发连接</li><li><strong>低延迟</strong>: 消息延迟 &lt; 50ms</li><li><strong>高吞吐</strong>: 支持每秒百万级消息处理</li><li><strong>水平扩展</strong>: 支持集群部署和水平扩展</li></ul><h2 id="下一步" tabindex="-1">下一步 <a class="header-anchor" href="#下一步" aria-label="Permalink to &quot;下一步&quot;">​</a></h2><ul><li><a href="./tech-stack.html">技术栈详解</a> - 深入了解技术选型</li><li><a href="./structure.html">项目结构</a> - 详细的项目结构说明</li><li><a href="./development.html">开发指南</a> - 本地开发环境搭建</li><li><a href="./../api/">API文档</a> - 完整的API接口文档</li></ul>`,71)]))}const c=i(l,[["render",e]]);export{E as __pageData,c as default};
