<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ç§»åŠ¨ç«¯å¼€å‘æ¦‚è¿° | æµ·ç‹¸IM</title>
    <meta name="description" content="åŸºäº go-zero + uni-app + Electron æ„å»ºçš„ç°ä»£åŒ–IMè§£å†³æ–¹æ¡ˆ">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/beaver-docs/assets/style.C6n5VyqE.css" as="style">
    <link rel="preload stylesheet" href="/beaver-docs/vp-icons.css" as="style">
    
    <script type="module" src="/beaver-docs/assets/app.DDPC92Dp.js"></script>
    <link rel="preload" href="/beaver-docs/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/beaver-docs/assets/chunks/theme.DzgkL1Fs.js">
    <link rel="modulepreload" href="/beaver-docs/assets/chunks/framework.YPSzFf6x.js">
    <link rel="modulepreload" href="/beaver-docs/assets/mobile_index.md.CXcgLtKy.lean.js">
    <link rel="icon" href="/favicon.ico">
    <style>
      :root {
        --vp-c-brand-1: #FF7D45;
        --vp-c-brand-2: #E86835;
        --vp-c-brand-3: #FFE6D9;
        --vp-c-brand-soft: #FFE6D9;
        --vp-home-hero-name-color: transparent;
        --vp-home-hero-name-background: linear-gradient(135deg, #FF7D45 0%, #E86835 100%);
        --vp-home-hero-image-background-image: linear-gradient(135deg, #FF7D45 0%, #E86835 100%);
        --vp-home-hero-image-filter: blur(44px);
        --vp-button-brand-border: #FF7D45;
        --vp-button-brand-text: #FFFFFF;
        --vp-button-brand-bg: #FF7D45;
        --vp-button-brand-hover-border: #E86835;
        --vp-button-brand-hover-text: #FFFFFF;
        --vp-button-brand-hover-bg: #E86835;
        --vp-button-brand-active-border: #E86835;
        --vp-button-brand-active-text: #FFFFFF;
        --vp-button-brand-active-bg: #E86835;
      }
      
      .dark {
        --vp-c-brand-1: #FF7D45;
        --vp-c-brand-2: #E86835;
        --vp-c-brand-3: #FFE6D9;
        --vp-c-brand-soft: rgba(255, 125, 69, 0.14);
      }
    </style>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/beaver-docs/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/beaver-docs/logo.png" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>æµ·ç‹¸IM</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/beaver-docs/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>é¦–é¡µ</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/beaver-docs/guide/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>æŒ‡å—</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/beaver-docs/backend/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>åç«¯</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/beaver-docs/mobile/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>ç§»åŠ¨ç«¯</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/beaver-docs/desktop/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>æ¡Œé¢ç«¯</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wsrh8888/beaver-server" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wsrh8888/beaver-server" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 has-active" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>ç§»åŠ¨ç«¯å¼€å‘</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>é¡¹ç›®æ¦‚è¿°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/tech-stack.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>uni-appæŠ€æœ¯æ ˆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/structure.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>é¡¹ç›®ç»“æ„</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>åŠŸèƒ½æ¨¡å—</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/auth.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>ç”¨æˆ·è®¤è¯</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/chat.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>èŠå¤©ç•Œé¢</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/friends.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>å¥½å‹ç®¡ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/groups.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>ç¾¤ç»„ç®¡ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/file-transfer.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>æ–‡ä»¶ä¼ è¾“</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>å¼€å‘æŒ‡å—</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/development.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>æœ¬åœ°å¼€å‘</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/build.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>æ‰“åŒ…å‘å¸ƒ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/beaver-docs/mobile/platform.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>å¹³å°é€‚é…</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _beaver-docs_mobile_" data-v-e6f2a212><div><h1 id="ç§»åŠ¨ç«¯å¼€å‘æ¦‚è¿°" tabindex="-1">ç§»åŠ¨ç«¯å¼€å‘æ¦‚è¿° <a class="header-anchor" href="#ç§»åŠ¨ç«¯å¼€å‘æ¦‚è¿°" aria-label="Permalink to &quot;ç§»åŠ¨ç«¯å¼€å‘æ¦‚è¿°&quot;">â€‹</a></h1><p>æµ·ç‹¸IMç§»åŠ¨ç«¯åŸºäºuni-appæ¡†æ¶å¼€å‘ï¼Œé‡‡ç”¨Vue 3 + TypeScriptæŠ€æœ¯æ ˆï¼Œæ”¯æŒiOSã€Androidã€å°ç¨‹åºç­‰å¤šå¹³å°ä¸€ç å¤šç«¯ã€‚</p><h2 id="æŠ€æœ¯æ¶æ„" tabindex="-1">æŠ€æœ¯æ¶æ„ <a class="header-anchor" href="#æŠ€æœ¯æ¶æ„" aria-label="Permalink to &quot;æŠ€æœ¯æ¶æ„&quot;">â€‹</a></h2><h3 id="æ ¸å¿ƒæŠ€æœ¯æ ˆ" tabindex="-1">æ ¸å¿ƒæŠ€æœ¯æ ˆ <a class="header-anchor" href="#æ ¸å¿ƒæŠ€æœ¯æ ˆ" aria-label="Permalink to &quot;æ ¸å¿ƒæŠ€æœ¯æ ˆ&quot;">â€‹</a></h3><ul><li><strong>æ¡†æ¶</strong>: uni-app 3.0+</li><li><strong>å‰ç«¯</strong>: Vue 3.5+ + TypeScript 4.9+</li><li><strong>æ„å»ºå·¥å…·</strong>: Vite 5.2+</li><li><strong>çŠ¶æ€ç®¡ç†</strong>: Pinia 2.2+</li><li><strong>UIæ¡†æ¶</strong>: è‡ªå®šä¹‰ç»„ä»¶åº“</li><li><strong>é€šä¿¡åè®®</strong>: WebSocket + HTTP API</li><li><strong>æ•°æ®å­˜å‚¨</strong>: uni.setStorage / SQLite</li><li><strong>å¤šåª’ä½“</strong>: uni-appåª’ä½“API</li></ul><h3 id="æ¶æ„ç‰¹ç‚¹" tabindex="-1">æ¶æ„ç‰¹ç‚¹ <a class="header-anchor" href="#æ¶æ„ç‰¹ç‚¹" aria-label="Permalink to &quot;æ¶æ„ç‰¹ç‚¹&quot;">â€‹</a></h3><ul><li><strong>ä¸€ç å¤šç«¯</strong>: ä¸€å¥—ä»£ç ç¼–è¯‘åˆ°iOSã€Androidã€å°ç¨‹åº</li><li><strong>åŸç”Ÿæ€§èƒ½</strong>: æ¥è¿‘åŸç”Ÿåº”ç”¨çš„æ€§èƒ½ä½“éªŒ</li><li><strong>è·¨å¹³å°å…¼å®¹</strong>: ç»Ÿä¸€çš„APIï¼Œå¹³å°å·®å¼‚æœ€å°åŒ–</li><li><strong>ä¸°å¯Œç”Ÿæ€</strong>: uni-appæ’ä»¶å¸‚åœºèµ„æºä¸°å¯Œ</li><li><strong>çƒ­æ›´æ–°</strong>: æ”¯æŒçƒ­æ›´æ–°æœºåˆ¶</li></ul><h2 id="å¹³å°æ”¯æŒ" tabindex="-1">å¹³å°æ”¯æŒ <a class="header-anchor" href="#å¹³å°æ”¯æŒ" aria-label="Permalink to &quot;å¹³å°æ”¯æŒ&quot;">â€‹</a></h2><h3 id="ğŸ“±-ç§»åŠ¨å¹³å°" tabindex="-1">ğŸ“± ç§»åŠ¨å¹³å° <a class="header-anchor" href="#ğŸ“±-ç§»åŠ¨å¹³å°" aria-label="Permalink to &quot;ğŸ“± ç§»åŠ¨å¹³å°&quot;">â€‹</a></h3><ul><li><strong>iOS</strong>: åŸç”ŸiOSåº”ç”¨ (iOS 11+)</li><li><strong>Android</strong>: åŸç”ŸAndroidåº”ç”¨ (Android 7.0+)</li><li><strong>HarmonyOS</strong>: é¸¿è’™ç³»ç»Ÿæ”¯æŒ</li></ul><h3 id="ğŸŒ-å°ç¨‹åºå¹³å°" tabindex="-1">ğŸŒ å°ç¨‹åºå¹³å° <a class="header-anchor" href="#ğŸŒ-å°ç¨‹åºå¹³å°" aria-label="Permalink to &quot;ğŸŒ å°ç¨‹åºå¹³å°&quot;">â€‹</a></h3><ul><li><strong>å¾®ä¿¡å°ç¨‹åº</strong>: æ”¯æŒå¾®ä¿¡ç”Ÿæ€</li><li><strong>æ”¯ä»˜å®å°ç¨‹åº</strong>: æ”¯ä»˜å®ç”Ÿæ€é›†æˆ</li><li><strong>æŠ–éŸ³å°ç¨‹åº</strong>: å­—èŠ‚è·³åŠ¨ç”Ÿæ€</li><li><strong>ç™¾åº¦å°ç¨‹åº</strong>: ç™¾åº¦ç”Ÿæ€æ”¯æŒ</li><li><strong>QQå°ç¨‹åº</strong>: QQç”Ÿæ€æ”¯æŒ</li></ul><h3 id="ğŸ’»-å…¶ä»–å¹³å°" tabindex="-1">ğŸ’» å…¶ä»–å¹³å° <a class="header-anchor" href="#ğŸ’»-å…¶ä»–å¹³å°" aria-label="Permalink to &quot;ğŸ’» å…¶ä»–å¹³å°&quot;">â€‹</a></h3><ul><li><strong>H5</strong>: æ‰‹æœºæµè§ˆå™¨è®¿é—®</li><li><strong>å¿«åº”ç”¨</strong>: åä¸ºã€å°ç±³ç­‰å¿«åº”ç”¨å¹³å°</li></ul><h2 id="åº”ç”¨ç‰¹æ€§" tabindex="-1">åº”ç”¨ç‰¹æ€§ <a class="header-anchor" href="#åº”ç”¨ç‰¹æ€§" aria-label="Permalink to &quot;åº”ç”¨ç‰¹æ€§&quot;">â€‹</a></h2><h3 id="ğŸ’¬-èŠå¤©åŠŸèƒ½" tabindex="-1">ğŸ’¬ èŠå¤©åŠŸèƒ½ <a class="header-anchor" href="#ğŸ’¬-èŠå¤©åŠŸèƒ½" aria-label="Permalink to &quot;ğŸ’¬ èŠå¤©åŠŸèƒ½&quot;">â€‹</a></h3><ul><li><strong>å®æ—¶æ¶ˆæ¯</strong>: WebSocketå®æ—¶æ¶ˆæ¯æ”¶å‘</li><li><strong>å¤šåª’ä½“æ¶ˆæ¯</strong>: æ–‡æœ¬ã€å›¾ç‰‡ã€è¯­éŸ³ã€è§†é¢‘ã€ä½ç½®</li><li><strong>è¡¨æƒ…åŒ…</strong>: ä¸°å¯Œçš„è¡¨æƒ…åŒ…å’Œè‡ªå®šä¹‰è¡¨æƒ…</li><li><strong>æ¶ˆæ¯çŠ¶æ€</strong>: å‘é€ä¸­ã€å·²é€è¾¾ã€å·²è¯»çŠ¶æ€</li><li><strong>æ’¤å›åŠŸèƒ½</strong>: 2åˆ†é’Ÿå†…æ¶ˆæ¯æ’¤å›</li><li><strong>è½¬å‘åŠŸèƒ½</strong>: æ¶ˆæ¯è½¬å‘å’Œåˆå¹¶è½¬å‘</li></ul><h3 id="ğŸ‘¥-ç¤¾äº¤åŠŸèƒ½" tabindex="-1">ğŸ‘¥ ç¤¾äº¤åŠŸèƒ½ <a class="header-anchor" href="#ğŸ‘¥-ç¤¾äº¤åŠŸèƒ½" aria-label="Permalink to &quot;ğŸ‘¥ ç¤¾äº¤åŠŸèƒ½&quot;">â€‹</a></h3><ul><li><strong>å¥½å‹ç®¡ç†</strong>: æ·»åŠ ã€åˆ é™¤ã€å¤‡æ³¨å¥½å‹</li><li><strong>ç¾¤ç»„èŠå¤©</strong>: åˆ›å»ºã€ç®¡ç†ç¾¤ç»„</li><li><strong>æœ‹å‹åœˆ</strong>: åŠ¨æ€å‘å¸ƒå’Œäº’åŠ¨</li><li><strong>ç”¨æˆ·èµ„æ–™</strong>: ä¸ªäººä¿¡æ¯å±•ç¤ºå’Œç¼–è¾‘</li><li><strong>åœ¨çº¿çŠ¶æ€</strong>: å®æ—¶åœ¨çº¿çŠ¶æ€æ˜¾ç¤º</li></ul><h3 id="ğŸ””-æ¶ˆæ¯æ¨é€" tabindex="-1">ğŸ”” æ¶ˆæ¯æ¨é€ <a class="header-anchor" href="#ğŸ””-æ¶ˆæ¯æ¨é€" aria-label="Permalink to &quot;ğŸ”” æ¶ˆæ¯æ¨é€&quot;">â€‹</a></h3><ul><li><strong>ç¦»çº¿æ¨é€</strong>: æ”¯æŒå‚å•†æ¨é€é€šé“</li><li><strong>æ¶ˆæ¯å…æ‰“æ‰°</strong>: ç¾¤ç»„å’Œå¥½å‹å…æ‰“æ‰°è®¾ç½®</li><li><strong>æ¨é€ç­–ç•¥</strong>: æ™ºèƒ½æ¨é€ç­–ç•¥</li><li><strong>é€šçŸ¥è®¾ç½®</strong>: ä¸ªæ€§åŒ–é€šçŸ¥è®¾ç½®</li></ul><h3 id="ğŸ¨-ç•Œé¢ä½“éªŒ" tabindex="-1">ğŸ¨ ç•Œé¢ä½“éªŒ <a class="header-anchor" href="#ğŸ¨-ç•Œé¢ä½“éªŒ" aria-label="Permalink to &quot;ğŸ¨ ç•Œé¢ä½“éªŒ&quot;">â€‹</a></h3><ul><li><strong>æš—é»‘æ¨¡å¼</strong>: æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢</li><li><strong>å­—ä½“å¤§å°</strong>: å¯è°ƒèŠ‚å­—ä½“å¤§å°</li><li><strong>èŠå¤©èƒŒæ™¯</strong>: ä¸ªæ€§åŒ–èŠå¤©èƒŒæ™¯</li><li><strong>æ‰‹åŠ¿æ“ä½œ</strong>: æ»‘åŠ¨æ“ä½œå’Œé•¿æŒ‰èœå•</li></ul><h2 id="é¡¹ç›®ç»“æ„" tabindex="-1">é¡¹ç›®ç»“æ„ <a class="header-anchor" href="#é¡¹ç›®ç»“æ„" aria-label="Permalink to &quot;é¡¹ç›®ç»“æ„&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>beaver-mobile/</span></span>
<span class="line"><span>â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ components/           # é€šç”¨ç»„ä»¶</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ chat/            # èŠå¤©ç›¸å…³ç»„ä»¶</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ common/          # å…¬å…±ç»„ä»¶</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ media/           # å¤šåª’ä½“ç»„ä»¶</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ pages/               # é¡µé¢</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ index/           # é¦–é¡µ</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ chat/            # èŠå¤©é¡µé¢</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ contacts/        # è”ç³»äºº</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ discover/        # å‘ç°é¡µ</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ profile/         # ä¸ªäººä¸­å¿ƒ</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ login/           # ç™»å½•æ³¨å†Œ</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ static/              # é™æ€èµ„æº</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ images/          # å›¾ç‰‡èµ„æº</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ fonts/           # å­—ä½“æ–‡ä»¶</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ emoji/           # è¡¨æƒ…åŒ…</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ store/               # çŠ¶æ€ç®¡ç†</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ modules/         # çŠ¶æ€æ¨¡å—</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ index.ts         # çŠ¶æ€å…¥å£</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ request.ts       # ç½‘ç»œè¯·æ±‚</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ websocket.ts     # WebSocketç®¡ç†</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ storage.ts       # æœ¬åœ°å­˜å‚¨</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ permission.ts    # æƒé™ç®¡ç†</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰</span></span>
<span class="line"><span>â”‚   â””â”€â”€ uni_modules/         # uni-appæ’ä»¶</span></span>
<span class="line"><span>â”œâ”€â”€ pages.json               # é¡µé¢é…ç½®</span></span>
<span class="line"><span>â”œâ”€â”€ manifest.json            # åº”ç”¨é…ç½®</span></span>
<span class="line"><span>â”œâ”€â”€ uni.scss                 # å…¨å±€æ ·å¼</span></span>
<span class="line"><span>â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®</span></span>
<span class="line"><span>â””â”€â”€ vite.config.ts          # æ„å»ºé…ç½®</span></span></code></pre></div><h2 id="æ ¸å¿ƒæ¨¡å—" tabindex="-1">æ ¸å¿ƒæ¨¡å— <a class="header-anchor" href="#æ ¸å¿ƒæ¨¡å—" aria-label="Permalink to &quot;æ ¸å¿ƒæ¨¡å—&quot;">â€‹</a></h2><h3 id="_1-æ¶ˆæ¯ç®¡ç†" tabindex="-1">1. æ¶ˆæ¯ç®¡ç† <a class="header-anchor" href="#_1-æ¶ˆæ¯ç®¡ç†" aria-label="Permalink to &quot;1. æ¶ˆæ¯ç®¡ç†&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/utils/message.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sendMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">conversationId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      id: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">generateId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      conversationId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      content,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      timestamp: Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      status: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;sending&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(conversationId, message)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uploadToServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ¥æ”¶æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  receiveMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.conversationId, message)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateUnreadCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.conversationId)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-websocketè¿æ¥" tabindex="-1">2. WebSocketè¿æ¥ <a class="header-anchor" href="#_2-websocketè¿æ¥" aria-label="Permalink to &quot;2. WebSocketè¿æ¥&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/utils/websocket.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocketManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> heartbeatTimer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setupEventHandlers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startHeartbeat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setupEventHandlers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onopen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handleOpen</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onmessage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handleMessage</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onclose </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handleReconnect</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-çŠ¶æ€ç®¡ç†" tabindex="-1">3. çŠ¶æ€ç®¡ç† <a class="header-anchor" href="#_3-çŠ¶æ€ç®¡ç†" aria-label="Permalink to &quot;3. çŠ¶æ€ç®¡ç†&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/store/modules/user.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> useUserStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    userInfo: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    token: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    isLogin: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  actions: {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">loginData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LoginData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> api.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loginData)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.userInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res.data.userInfo</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res.data.token</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.isLogin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStorageSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;userInfo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.userInfo)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStorageSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;token&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.token)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="_4-å¤šåª’ä½“å¤„ç†" tabindex="-1">4. å¤šåª’ä½“å¤„ç† <a class="header-anchor" href="#_4-å¤šåª’ä½“å¤„ç†" aria-label="Permalink to &quot;4. å¤šåª’ä½“å¤„ç†&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/utils/media.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MediaManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // é€‰æ‹©å›¾ç‰‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> chooseImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chooseImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        sourceType: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;album&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;camera&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        success: resolve,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fail: reject</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å½•åˆ¶éŸ³é¢‘</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> recordAudio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> recorderManager</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRecorderManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    recorderManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      duration: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      sampleRate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      numberOfChannels: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      encodeBitRate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">48000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      format: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mp3&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> recorderManager</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="å¹³å°é€‚é…" tabindex="-1">å¹³å°é€‚é… <a class="header-anchor" href="#å¹³å°é€‚é…" aria-label="Permalink to &quot;å¹³å°é€‚é…&quot;">â€‹</a></h2><h3 id="iosé€‚é…" tabindex="-1">iOSé€‚é… <a class="header-anchor" href="#iosé€‚é…" aria-label="Permalink to &quot;iOSé€‚é…&quot;">â€‹</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// manifest.json - iOSé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;app-plus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;iOS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;privacyDescription&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;NSCameraUsageDescription&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨äºæ‹ç…§å‘é€å›¾ç‰‡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;NSPhotoLibraryUsageDescription&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨äºé€‰æ‹©ç›¸å†Œå›¾ç‰‡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;NSMicrophoneUsageDescription&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨äºå½•åˆ¶è¯­éŸ³æ¶ˆæ¯&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;capabilities&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;entitlements&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;com.apple.developer.associated-domains&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;applinks:yourdomain.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="androidé€‚é…" tabindex="-1">Androidé€‚é… <a class="header-anchor" href="#androidé€‚é…" aria-label="Permalink to &quot;Androidé€‚é…&quot;">â€‹</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// manifest.json - Androidé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;app-plus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Android&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;permissions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&lt;uses-permission android:name=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">android.permission.CAMERA</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&lt;uses-permission android:name=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">android.permission.RECORD_AUDIO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&lt;uses-permission android:name=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">android.permission.ACCESS_FINE_LOCATION</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;targetSdkVersion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">33</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;compileSdkVersion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">33</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="åŠŸèƒ½å®ç°" tabindex="-1">åŠŸèƒ½å®ç° <a class="header-anchor" href="#åŠŸèƒ½å®ç°" aria-label="Permalink to &quot;åŠŸèƒ½å®ç°&quot;">â€‹</a></h2><h3 id="_1-èŠå¤©ç•Œé¢" tabindex="-1">1. èŠå¤©ç•Œé¢ <a class="header-anchor" href="#_1-èŠå¤©ç•Œé¢" aria-label="Permalink to &quot;1. èŠå¤©ç•Œé¢&quot;">â€‹</a></h3><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- src/pages/chat/chat.vue --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chat-container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- æ¶ˆæ¯åˆ—è¡¨ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scroll-view</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message-list&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :scroll-top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scrollTop&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">message-item</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        v-for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message in messages&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        :key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message.id&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        :message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        @resend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;resendMessage&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scroll-view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- è¾“å…¥åŒºåŸŸ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input-area&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;inputText&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¾“å…¥æ¶ˆæ¯...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        @confirm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sendMessage&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sendMessage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;å‘é€&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="_2-å¥½å‹åˆ—è¡¨" tabindex="-1">2. å¥½å‹åˆ—è¡¨ <a class="header-anchor" href="#_2-å¥½å‹åˆ—è¡¨" aria-label="Permalink to &quot;2. å¥½å‹åˆ—è¡¨&quot;">â€‹</a></h3><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- src/pages/contacts/contacts.vue --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;contacts-container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uni-search-bar</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;searchText&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æœç´¢è”ç³»äºº&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      @input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;searchContacts&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uni-list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uni-list-item</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        v-for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;friend in friendList&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        :key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;friend.id&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        :title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;friend.nickname&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        :thumb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;friend.avatar&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        @click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openChat(friend)&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uni-list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="_3-æ¶ˆæ¯æ¨é€" tabindex="-1">3. æ¶ˆæ¯æ¨é€ <a class="header-anchor" href="#_3-æ¶ˆæ¯æ¨é€" aria-label="Permalink to &quot;3. æ¶ˆæ¯æ¨é€&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/utils/push.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PushManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åˆå§‹åŒ–æ¨é€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // #ifdef APP-PLUS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pushManager</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> plus.push</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    pushManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handlePushClick)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    pushManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;receive&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handlePushReceive)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // #endif</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¤„ç†æ¨é€ç‚¹å‡»</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handlePushClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è·³è½¬åˆ°å¯¹åº”èŠå¤©é¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">navigateTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`/pages/chat/chat?conversationId=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">message</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">payload</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conversationId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="æ€§èƒ½ä¼˜åŒ–" tabindex="-1">æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h2><h3 id="_1-åˆ—è¡¨ä¼˜åŒ–" tabindex="-1">1. åˆ—è¡¨ä¼˜åŒ– <a class="header-anchor" href="#_1-åˆ—è¡¨ä¼˜åŒ–" aria-label="Permalink to &quot;1. åˆ—è¡¨ä¼˜åŒ–&quot;">â€‹</a></h3><ul><li>è™šæ‹Ÿæ»šåŠ¨ï¼šé•¿åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨</li><li>æ‡’åŠ è½½ï¼šå›¾ç‰‡å’Œç»„ä»¶æ‡’åŠ è½½</li><li>åˆ†é¡µåŠ è½½ï¼šæ¶ˆæ¯å†å²åˆ†é¡µåŠ è½½</li></ul><h3 id="_2-å†…å­˜ä¼˜åŒ–" tabindex="-1">2. å†…å­˜ä¼˜åŒ– <a class="header-anchor" href="#_2-å†…å­˜ä¼˜åŒ–" aria-label="Permalink to &quot;2. å†…å­˜ä¼˜åŒ–&quot;">â€‹</a></h3><ul><li>å›¾ç‰‡å‹ç¼©ï¼šå‘é€å‰å‹ç¼©å›¾ç‰‡</li><li>ç¼“å­˜ç®¡ç†ï¼šåˆç†çš„ç¼“å­˜ç­–ç•¥</li><li>å†…å­˜å›æ”¶ï¼šåŠæ—¶æ¸…ç†æ— ç”¨æ•°æ®</li></ul><h3 id="_3-ç½‘ç»œä¼˜åŒ–" tabindex="-1">3. ç½‘ç»œä¼˜åŒ– <a class="header-anchor" href="#_3-ç½‘ç»œä¼˜åŒ–" aria-label="Permalink to &quot;3. ç½‘ç»œä¼˜åŒ–&quot;">â€‹</a></h3><ul><li>è¯·æ±‚åˆå¹¶ï¼šæ‰¹é‡è¯·æ±‚ä¼˜åŒ–</li><li>ç¼“å­˜ç­–ç•¥ï¼šæ¥å£æ•°æ®ç¼“å­˜</li><li>é‡è¿æœºåˆ¶ï¼šç½‘ç»œå¼‚å¸¸é‡è¿</li></ul><h2 id="å‘å¸ƒæµç¨‹" tabindex="-1">å‘å¸ƒæµç¨‹ <a class="header-anchor" href="#å‘å¸ƒæµç¨‹" aria-label="Permalink to &quot;å‘å¸ƒæµç¨‹&quot;">â€‹</a></h2><h3 id="_1-ç‰ˆæœ¬ç®¡ç†" tabindex="-1">1. ç‰ˆæœ¬ç®¡ç† <a class="header-anchor" href="#_1-ç‰ˆæœ¬ç®¡ç†" aria-label="Permalink to &quot;1. ç‰ˆæœ¬ç®¡ç†&quot;">â€‹</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;versionCode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-æ‰“åŒ…é…ç½®" tabindex="-1">2. æ‰“åŒ…é…ç½® <a class="header-anchor" href="#_2-æ‰“åŒ…é…ç½®" aria-label="Permalink to &quot;2. æ‰“åŒ…é…ç½®&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># iOSæ‰“åŒ…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:app-ios</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Androidæ‰“åŒ…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:app-android</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°ç¨‹åºæ‰“åŒ…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:mp-weixin</span></span></code></pre></div><h3 id="_3-ä¸Šæ¶æµç¨‹" tabindex="-1">3. ä¸Šæ¶æµç¨‹ <a class="header-anchor" href="#_3-ä¸Šæ¶æµç¨‹" aria-label="Permalink to &quot;3. ä¸Šæ¶æµç¨‹&quot;">â€‹</a></h3><ul><li><strong>App Store</strong>: é€šè¿‡HBuilderXäº‘æ‰“åŒ…iOS</li><li><strong>Google Play</strong>: Android AABæ ¼å¼ä¸Šæ¶</li><li><strong>å›½å†…åº”ç”¨å¸‚åœº</strong>: å„å¤§Androidåº”ç”¨å¸‚åœº</li><li><strong>å°ç¨‹åº</strong>: å¾®ä¿¡å¼€å‘è€…å·¥å…·å‘å¸ƒ</li></ul><h2 id="è°ƒè¯•å·¥å…·" tabindex="-1">è°ƒè¯•å·¥å…· <a class="header-anchor" href="#è°ƒè¯•å·¥å…·" aria-label="Permalink to &quot;è°ƒè¯•å·¥å…·&quot;">â€‹</a></h2><h3 id="_1-å¼€å‘è°ƒè¯•" tabindex="-1">1. å¼€å‘è°ƒè¯• <a class="header-anchor" href="#_1-å¼€å‘è°ƒè¯•" aria-label="Permalink to &quot;1. å¼€å‘è°ƒè¯•&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># H5è°ƒè¯•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev:h5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¾®ä¿¡å°ç¨‹åºè°ƒè¯•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev:mp-weixin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Appè°ƒè¯•ï¼ˆéœ€è¦HBuilderXï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev:app-android</span></span></code></pre></div><h3 id="_2-çœŸæœºè°ƒè¯•" tabindex="-1">2. çœŸæœºè°ƒè¯• <a class="header-anchor" href="#_2-çœŸæœºè°ƒè¯•" aria-label="Permalink to &quot;2. çœŸæœºè°ƒè¯•&quot;">â€‹</a></h3><ul><li>HBuilderXçœŸæœºè¿è¡Œ</li><li>å¾®ä¿¡å¼€å‘è€…å·¥å…·è°ƒè¯•</li><li>Safariè¿œç¨‹è°ƒè¯•iOS</li><li>Chromeè¿œç¨‹è°ƒè¯•Android</li></ul><h2 id="ä¸‹ä¸€æ­¥" tabindex="-1">ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;ä¸‹ä¸€æ­¥&quot;">â€‹</a></h2><ul><li><a href="./tech-stack.html">æŠ€æœ¯æ ˆè¯¦è§£</a> - æ·±å…¥äº†è§£uni-appæŠ€æœ¯æ ˆ</li><li><a href="./structure.html">é¡¹ç›®ç»“æ„</a> - è¯¦ç»†çš„é¡¹ç›®ç»“æ„è¯´æ˜</li><li><a href="./platform.html">å¹³å°é€‚é…</a> - å„å¹³å°ç‰¹æ€§é€‚é…</li><li><a href="./development.html">å¼€å‘æŒ‡å—</a> - æœ¬åœ°å¼€å‘ç¯å¢ƒæ­å»º</li></ul></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><div class="edit-link" data-v-1bcd8184><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/wsrh8888/beaver-server/edit/main/docs/mobile/index.md" target="_blank" rel="noreferrer" data-v-1bcd8184><!--[--><span class="vpi-square-pen edit-link-icon" data-v-1bcd8184></span> åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µé¢<!--]--></a></div><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>æœ€åæ›´æ–°äº: <time datetime="2025-06-04T12:15:03.000Z" data-v-1bb0c8a8></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/beaver-docs/mobile/tech-stack.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>uni-appæŠ€æœ¯æ ˆ</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>åŸºäº Apache-2.0 è®¸å¯å‘å¸ƒ</p><p class="copyright" data-v-566314d4>Copyright Â© 2024 æµ·ç‹¸IM</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"backend_development.md\":\"B98t2GpH\",\"backend_index.md\":\"CqyclBFv\",\"deployment.md\":\"DuiPYAmE\",\"desktop_development.md\":\"CKlHYMwr\",\"desktop_index.md\":\"CDSTakdW\",\"guide_deployment.md\":\"DR2TdXSD\",\"guide_index.md\":\"C-ac8Pg_\",\"guide_requirements.md\":\"BsuogoWi\",\"guide_requirements_backend.md\":\"eYLhmfe-\",\"guide_requirements_backend_docker.md\":\"DZYDA3_w\",\"guide_requirements_backend_etcd-workbench.md\":\"tJWCZkV3\",\"guide_requirements_backend_golang.md\":\"FE_0LOfp\",\"guide_requirements_backend_navicat.md\":\"Btijl961\",\"guide_requirements_backend_redis-manager.md\":\"JR2xPmn1\",\"guide_requirements_common.md\":\"PtTL5UYi\",\"guide_requirements_common_apifox.md\":\"OlxBfUb8\",\"guide_requirements_common_vscode.md\":\"BaunFIjr\",\"guide_requirements_frontend.md\":\"CyaCTRy6\",\"guide_requirements_frontend_hbuilderx.md\":\"BYC49H1g\",\"guide_requirements_frontend_nodejs.md\":\"C2aF0aqe\",\"index.md\":\"9HzQSb1b\",\"mobile_development.md\":\"ngGj0UGn\",\"mobile_index.md\":\"CXcgLtKy\",\"public_logos_readme.md\":\"edmpzNps\",\"readme.md\":\"HE16s7Ns\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"æµ·ç‹¸IM\",\"description\":\"åŸºäº go-zero + uni-app + Electron æ„å»ºçš„ç°ä»£åŒ–IMè§£å†³æ–¹æ¡ˆ\",\"base\":\"/beaver-docs/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"é¦–é¡µ\",\"link\":\"/\"},{\"text\":\"æŒ‡å—\",\"link\":\"/guide/\"},{\"text\":\"åç«¯\",\"link\":\"/backend/\"},{\"text\":\"ç§»åŠ¨ç«¯\",\"link\":\"/mobile/\"},{\"text\":\"æ¡Œé¢ç«¯\",\"link\":\"/desktop/\"}],\"sidebar\":{\"/guide/\":[{\"text\":\"å…¥é—¨æŒ‡å—\",\"items\":[{\"text\":\"é¡¹ç›®ä»‹ç»\",\"link\":\"/guide/\"},{\"text\":\"è½¯ä»¶è¦æ±‚\",\"link\":\"/guide/requirements\",\"collapsed\":false,\"items\":[{\"text\":\"åç«¯å¼€å‘è½¯ä»¶\",\"link\":\"/guide/requirements/backend\",\"collapsed\":false,\"items\":[{\"text\":\"Golang\",\"link\":\"/guide/requirements/backend/golang\"},{\"text\":\"Docker Desktop\",\"link\":\"/guide/requirements/backend/docker\"},{\"text\":\"Navicat\",\"link\":\"/guide/requirements/backend/navicat\"},{\"text\":\"Redisç®¡ç†å·¥å…·\",\"link\":\"/guide/requirements/backend/redis-manager\"},{\"text\":\"Etcd Workbench\",\"link\":\"/guide/requirements/backend/etcd-workbench\"}]},{\"text\":\"å‰ç«¯å¼€å‘è½¯ä»¶\",\"link\":\"/guide/requirements/frontend\",\"collapsed\":false,\"items\":[{\"text\":\"Node.js\",\"link\":\"/guide/requirements/frontend/nodejs\"},{\"text\":\"HBuilder X\",\"link\":\"/guide/requirements/frontend/hbuilderx\"}]},{\"text\":\"å…¬å…±å¼€å‘å·¥å…·\",\"link\":\"/guide/requirements/common\",\"collapsed\":false,\"items\":[{\"text\":\"Visual Studio Code\",\"link\":\"/guide/requirements/common/vscode\"},{\"text\":\"Apifox\",\"link\":\"/guide/requirements/common/apifox\"}]}]}]}],\"/backend/\":[{\"text\":\"æœåŠ¡ç«¯å¼€å‘\",\"items\":[{\"text\":\"é¡¹ç›®æ¦‚è¿°\",\"link\":\"/backend/\"},{\"text\":\"æŠ€æœ¯æ ˆ\",\"link\":\"/backend/tech-stack\"},{\"text\":\"é¡¹ç›®ç»“æ„\",\"link\":\"/backend/structure\"}]},{\"text\":\"å¾®æœåŠ¡æ¨¡å—\",\"items\":[{\"text\":\"ç”¨æˆ·æœåŠ¡\",\"link\":\"/backend/user-service\"},{\"text\":\"è®¤è¯æœåŠ¡\",\"link\":\"/backend/auth-service\"},{\"text\":\"å¥½å‹æœåŠ¡\",\"link\":\"/backend/friend-service\"},{\"text\":\"èŠå¤©æœåŠ¡\",\"link\":\"/backend/chat-service\"},{\"text\":\"WebSocketæœåŠ¡\",\"link\":\"/backend/ws-service\"},{\"text\":\"ç¾¤ç»„æœåŠ¡\",\"link\":\"/backend/group-service\"},{\"text\":\"æ–‡ä»¶æœåŠ¡\",\"link\":\"/backend/file-service\"}]},{\"text\":\"å¼€å‘æŒ‡å—\",\"items\":[{\"text\":\"æœ¬åœ°å¼€å‘\",\"link\":\"/backend/development\"},{\"text\":\"APIè®¾è®¡\",\"link\":\"/backend/api-design\"},{\"text\":\"æ•°æ®åº“è®¾è®¡\",\"link\":\"/backend/database\"},{\"text\":\"æ¶ˆæ¯å­˜å‚¨\",\"link\":\"/backend/message-storage\"}]}],\"/mobile/\":[{\"text\":\"ç§»åŠ¨ç«¯å¼€å‘\",\"items\":[{\"text\":\"é¡¹ç›®æ¦‚è¿°\",\"link\":\"/mobile/\"},{\"text\":\"uni-appæŠ€æœ¯æ ˆ\",\"link\":\"/mobile/tech-stack\"},{\"text\":\"é¡¹ç›®ç»“æ„\",\"link\":\"/mobile/structure\"}]},{\"text\":\"åŠŸèƒ½æ¨¡å—\",\"items\":[{\"text\":\"ç”¨æˆ·è®¤è¯\",\"link\":\"/mobile/auth\"},{\"text\":\"èŠå¤©ç•Œé¢\",\"link\":\"/mobile/chat\"},{\"text\":\"å¥½å‹ç®¡ç†\",\"link\":\"/mobile/friends\"},{\"text\":\"ç¾¤ç»„ç®¡ç†\",\"link\":\"/mobile/groups\"},{\"text\":\"æ–‡ä»¶ä¼ è¾“\",\"link\":\"/mobile/file-transfer\"}]},{\"text\":\"å¼€å‘æŒ‡å—\",\"items\":[{\"text\":\"æœ¬åœ°å¼€å‘\",\"link\":\"/mobile/development\"},{\"text\":\"æ‰“åŒ…å‘å¸ƒ\",\"link\":\"/mobile/build\"},{\"text\":\"å¹³å°é€‚é…\",\"link\":\"/mobile/platform\"}]}],\"/desktop/\":[{\"text\":\"æ¡Œé¢ç«¯å¼€å‘\",\"items\":[{\"text\":\"é¡¹ç›®æ¦‚è¿°\",\"link\":\"/desktop/\"},{\"text\":\"ElectronæŠ€æœ¯æ ˆ\",\"link\":\"/desktop/tech-stack\"},{\"text\":\"é¡¹ç›®ç»“æ„\",\"link\":\"/desktop/structure\"}]},{\"text\":\"åŠŸèƒ½æ¨¡å—\",\"items\":[{\"text\":\"ä¸»è¿›ç¨‹\",\"link\":\"/desktop/main-process\"},{\"text\":\"æ¸²æŸ“è¿›ç¨‹\",\"link\":\"/desktop/renderer-process\"},{\"text\":\"WebSocketè¿æ¥\",\"link\":\"/desktop/websocket\"},{\"text\":\"æ¶ˆæ¯ç®¡ç†\",\"link\":\"/desktop/message\"},{\"text\":\"æ–‡ä»¶å¤„ç†\",\"link\":\"/desktop/file-handling\"}]},{\"text\":\"å¼€å‘æŒ‡å—\",\"items\":[{\"text\":\"æœ¬åœ°å¼€å‘\",\"link\":\"/desktop/development\"},{\"text\":\"æ‰“åŒ…å‘å¸ƒ\",\"link\":\"/desktop/build\"},{\"text\":\"è·¨å¹³å°é€‚é…\",\"link\":\"/desktop/cross-platform\"}]}],\"/api/\":[{\"text\":\"APIæ¥å£\",\"items\":[{\"text\":\"APIæ¦‚è¿°\",\"link\":\"/api/\"},{\"text\":\"è®¤è¯æ–¹å¼\",\"link\":\"/api/authentication\"},{\"text\":\"é”™è¯¯ç \",\"link\":\"/api/error-codes\"}]},{\"text\":\"ç”¨æˆ·ç›¸å…³\",\"items\":[{\"text\":\"ç”¨æˆ·æ³¨å†Œ\",\"link\":\"/api/user-register\"},{\"text\":\"ç”¨æˆ·ç™»å½•\",\"link\":\"/api/user-login\"},{\"text\":\"ç”¨æˆ·ä¿¡æ¯\",\"link\":\"/api/user-info\"}]},{\"text\":\"æ¶ˆæ¯ç›¸å…³\",\"items\":[{\"text\":\"å‘é€æ¶ˆæ¯\",\"link\":\"/api/send-message\"},{\"text\":\"è·å–æ¶ˆæ¯\",\"link\":\"/api/get-messages\"},{\"text\":\"æ¶ˆæ¯å·²è¯»\",\"link\":\"/api/message-read\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/wsrh8888/beaver-server\"}],\"footer\":{\"message\":\"åŸºäº Apache-2.0 è®¸å¯å‘å¸ƒ\",\"copyright\":\"Copyright Â© 2024 æµ·ç‹¸IM\"},\"search\":{\"provider\":\"local\"},\"editLink\":{\"pattern\":\"https://github.com/wsrh8888/beaver-server/edit/main/docs/:path\",\"text\":\"åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µé¢\"},\"lastUpdated\":{\"text\":\"æœ€åæ›´æ–°äº\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>